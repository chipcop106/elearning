@@include('./../head.html')

<body>
    @@include('./../header.html')
    <div class="content content-fixed">
        <div class="container pd-x-0 pd-lg-x-10 pd-xl-x-0 ">
            <div id="react-teacher-form"></div>
            <script src="../../components/TeacherProfile/TeacherForm.js"></script>
        </div>
    </div>
    @@include('./../footer.html')
    <script>
        $(document).ready(function () {
            const form = document.getElementById('form-teacher-profile');

            $(".js-select2").select2({
                closeOnSelect: false,
                placeholder: "What kind of teaching experience do you have?",
                allowHtml: false,
                allowClear: true,
                // tags: true // создает новые опции на лету
            });

            const closestParent = (child, className) => {
                if (!child || child == document) {
                    return null;
                }
                if (child.classList.contains(className)) {
                    return child;
                } else {
                    return closestParent(child.parentNode, className);
                }
            }

            const resetFormGroup = (formGroup) => {
                // Remove the success and error classes
                formGroup.classList.remove("has-error");
                formGroup.classList.remove("has-success");
                // and remove any old messages
                _.each(formGroup.querySelectorAll(".help-block.error"), function (el) {
                    el.parentNode.removeChild(el);
                });
            }

            const showErrorsForInput = (input, errors) => {
                // This is the root of the input
                var formGroup = closestParent(input.parentNode, "form-group")
                    // Find where the error messages will be insert into
                    , messages = formGroup.querySelector(".messages");
                // First we remove any old messages and resets the classes
                resetFormGroup(formGroup);
                // If we have errors
                if (errors) {
                    // we first mark the group has having errors
                    formGroup.classList.add("has-error");
                    // then we append all the errors
                    _.each(errors, function (error) {
                        addError(messages, error);
                    });
                } else {
                    // otherwise we simply mark it as success
                    formGroup.classList.add("has-success");
                }
            }

            const showErrors = (form, errors) => {
                _.each(form.querySelectorAll("input[name], select[name]"), function (input) {
                    // Since the errors can be null if no errors were found we need to handle
                    // that
                    showErrorsForInput(input, errors && errors[input.name]);
                });
            }
        

            const elementForms = document.querySelectorAll("input, textarea, select");
            [...elementForms].map(ele => {
                ele.addEventListener('change', function () {
                    const errors = validate(form, validateRules);
                    showErrors(form, errors || {});
                });
            })
         });
    </script>
</body>

</html>